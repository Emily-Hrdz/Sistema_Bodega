import{a as B}from"./chunk-V36QIO3V.js";import{a as x,b as N,c,d as I,e as y,f as A,h as D,i as k,j as O,k as R,l as V,n as j,o as q,p as G}from"./chunk-KK4GU3FI.js";import"./chunk-YCMZOG5D.js";import{c as _,e as T}from"./chunk-3IEEZZYB.js";import{Fa as h,Hb as S,Ib as E,Ja as d,Kb as C,Ua as a,Va as r,Wa as e,Xa as v,ab as b,bb as M,hb as n,ib as F,jb as g,ua as l,za as s}from"./chunk-BGDAOEK3.js";function P(m,o){if(m&1&&(r(0,"div",20),n(1),e()),m&2){let i=M();l(),F(i.error)}}function w(m,o){m&1&&(r(0,"div",21),n(1," C\xF3digo es requerido (m\xE1x. 20 caracteres) "),e())}function z(m,o){m&1&&(r(0,"div",21),n(1," Nombre es requerido "),e())}function J(m,o){if(m&1&&(r(0,"option",22),n(1),e()),m&2){let i=o.$implicit;a("value",i.value),l(),g(" ",i.label," ")}}function U(m,o){m&1&&(r(0,"div",21),n(1," Tipo es requerido "),e())}var L=class m{constructor(o,i,t,p){this.fb=o;this.tipoMovimientoService=i;this.route=t;this.router=p;this.tipoMovimientoForm=this.fb.group({codigo:["",[c.required,c.maxLength(20)]],nombre:["",[c.required,c.maxLength(100)]],tipo:["",c.required],descripcion:[""],activo:[!0]})}tipoMovimientoForm;isEdit=!1;loading=!1;error=null;tipos=[{value:"ENTRADA",label:"Entrada"},{value:"SALIDA",label:"Salida"}];ngOnInit(){let o=this.route.snapshot.params.id;o&&(this.isEdit=!0,this.loadTipoMovimiento(Number(o)))}loadTipoMovimiento(o){this.loading=!0,this.tipoMovimientoService.getById(o).subscribe({next:i=>{this.tipoMovimientoForm.patchValue(i),this.loading=!1},error:i=>{this.error="Error al cargar tipo de movimiento",this.loading=!1,console.error(i)}})}onSubmit(){if(this.tipoMovimientoForm.invalid)return;this.loading=!0;let o=this.tipoMovimientoForm.value;if(this.isEdit){let i=this.route.snapshot.params.id;this.tipoMovimientoService.update(Number(i),o).subscribe({next:()=>{this.router.navigate(["/kardex/nuevo"])},error:t=>{this.error=t.error?.message||"Error al actualizar tipo de movimiento",this.loading=!1}})}else this.tipoMovimientoService.create(o).subscribe({next:()=>{this.router.navigate(["/kardex/nuevo"])},error:i=>{this.error=i.error?.message||"Error al crear tipo de movimiento",this.loading=!1}})}onCancel(){this.router.navigate(["/kardex/nuevo"])}static \u0275fac=function(i){return new(i||m)(s(q),s(B),s(_),s(T))};static \u0275cmp=h({type:m,selectors:[["app-tipo-movimiento-form"]],decls:36,vars:9,consts:[[1,"container"],["class","alert alert-error",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","codigo"],["type","text","id","codigo","formControlName","codigo","maxlength","20","placeholder","Ej: COMPRA, VENTA, AJUSTE",1,"form-control"],["class","error",4,"ngIf"],["for","nombre"],["type","text","id","nombre","formControlName","nombre","maxlength","100","placeholder","Ej: Compra de Productos",1,"form-control"],["for","tipo"],["id","tipo","formControlName","tipo",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","descripcion"],["id","descripcion","formControlName","descripcion","rows","3","placeholder","Descripci\xF3n del tipo de movimiento",1,"form-control"],[1,"checkbox-label"],["type","checkbox","formControlName","activo"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"alert","alert-error"],[1,"error"],[3,"value"]],template:function(i,t){if(i&1&&(r(0,"div",0)(1,"h1"),n(2),e(),d(3,P,2,1,"div",1),r(4,"form",2),b("ngSubmit",function(){return t.onSubmit()}),r(5,"div",3)(6,"label",4),n(7,"C\xF3digo *"),e(),v(8,"input",5),d(9,w,2,0,"div",6),e(),r(10,"div",3)(11,"label",7),n(12,"Nombre *"),e(),v(13,"input",8),d(14,z,2,0,"div",6),e(),r(15,"div",3)(16,"label",9),n(17,"Tipo *"),e(),r(18,"select",10)(19,"option",11),n(20,"Seleccione un tipo"),e(),d(21,J,2,2,"option",12),e(),d(22,U,2,0,"div",6),e(),r(23,"div",3)(24,"label",13),n(25,"Descripci\xF3n"),e(),v(26,"textarea",14),e(),r(27,"div",3)(28,"label",15),v(29,"input",16),n(30," Activo "),e()(),r(31,"div",17)(32,"button",18),n(33),e(),r(34,"button",19),b("click",function(){return t.onCancel()}),n(35," Cancelar "),e()()()()),i&2){let p,u,f;l(2),g("",t.isEdit?"Editar":"Nuevo"," Tipo de Movimiento"),l(),a("ngIf",t.error),l(),a("formGroup",t.tipoMovimientoForm),l(5),a("ngIf",((p=t.tipoMovimientoForm.get("codigo"))==null?null:p.invalid)&&((p=t.tipoMovimientoForm.get("codigo"))==null?null:p.touched)),l(5),a("ngIf",((u=t.tipoMovimientoForm.get("nombre"))==null?null:u.invalid)&&((u=t.tipoMovimientoForm.get("nombre"))==null?null:u.touched)),l(7),a("ngForOf",t.tipos),l(),a("ngIf",((f=t.tipoMovimientoForm.get("tipo"))==null?null:f.invalid)&&((f=t.tipoMovimientoForm.get("tipo"))==null?null:f.touched)),l(10),a("disabled",t.tipoMovimientoForm.invalid||t.loading),l(),g(" ",t.isEdit?"Actualizar":"Crear"," Tipo de Movimiento ")}},dependencies:[C,S,E,G,A,R,V,N,x,O,I,y,j,D,k],encapsulation:2})};export{L as TipoMovimientoFormComponent};
