import{a as K}from"./chunk-GY3KLXS3.js";import"./chunk-6OBKXAVN.js";import{e as L,h as y}from"./chunk-ZN2XXCIA.js";import{$a as b,Fa as f,Ib as M,Ja as c,Jb as k,Kb as I,Lb as C,Ua as d,Va as i,Wa as t,Y as v,Z as x,ab as g,bb as s,gb as S,hb as n,ib as l,jb as E,nb as p,ob as _,pb as h,ua as o,za as u}from"./chunk-CFCTFSSM.js";var A=r=>["/kardex",r],O=r=>["/kardex",r,"edit"];function w(r,a){r&1&&(i(0,"div",7),n(1,"Cargando..."),t())}function D(r,a){if(r&1&&(i(0,"div",8),n(1),t()),r&2){let e=s();o(),l(e.error)}}function V(r,a){if(r&1){let e=b();i(0,"tr")(1,"td"),n(2),_(3,"date"),t(),i(4,"td"),n(5),t(),i(6,"td"),n(7),t(),i(8,"td")(9,"span"),n(10),t()(),i(11,"td"),n(12),t(),i(13,"td"),n(14),t(),i(15,"td"),n(16),t(),i(17,"td")(18,"button",12),n(19," Ver "),t(),i(20,"button",13),n(21," Editar "),t(),i(22,"button",14),g("click",function(){let F=v(e).$implicit,N=s(2);return x(N.deleteMovimiento(F.id))}),n(23," Eliminar "),t()()()}if(r&2){let e=a.$implicit;o(2),l(h(3,11,e.fecha,"MM/dd/yy")),o(3),l(e.bodega==null?null:e.bodega.nombre),o(2),l(e.producto==null?null:e.producto.nombre),o(2),S((e.tipoMovimiento==null?null:e.tipoMovimiento.tipo)==="ENTRADA"?"badge-success":"badge-danger"),o(),E(" ",e.tipoMovimiento==null?null:e.tipoMovimiento.nombre," "),o(2),l(e.cantidad),o(2),l(e.saldoAnterior),o(2),l(e.saldoNuevo),o(2),d("routerLink",p(14,A,e.id)),o(2),d("routerLink",p(16,O,e.id))}}function P(r,a){if(r&1&&(i(0,"div",9)(1,"table",10)(2,"thead")(3,"tr")(4,"th"),n(5,"Fecha"),t(),i(6,"th"),n(7,"Bodega"),t(),i(8,"th"),n(9,"Producto"),t(),i(10,"th"),n(11,"Tipo Movimiento"),t(),i(12,"th"),n(13,"Cantidad"),t(),i(14,"th"),n(15,"Saldo Anterior"),t(),i(16,"th"),n(17,"Saldo Nuevo"),t(),i(18,"th"),n(19,"Acciones"),t()()(),i(20,"tbody"),c(21,V,24,18,"tr",11),t()()()),r&2){let e=s();o(21),d("ngForOf",e.movimientos)}}var T=class r{constructor(a){this.kardexService=a}movimientos=[];loading=!1;error=null;ngOnInit(){this.loadMovimientos()}loadMovimientos(){this.loading=!0,this.kardexService.getAll().subscribe({next:a=>{this.movimientos=a,this.loading=!1},error:a=>{this.error="Error al cargar movimientos",this.loading=!1,console.error(a)}})}deleteMovimiento(a){confirm("\xBFEst\xE1 seguro de eliminar este movimiento?")&&this.kardexService.delete(a).subscribe({next:()=>{this.loadMovimientos()},error:e=>{this.error="Error al eliminar movimiento",console.error(e)}})}static \u0275fac=function(e){return new(e||r)(u(K))};static \u0275cmp=f({type:r,selectors:[["app-kardex-list"]],decls:13,vars:3,consts:[[1,"container"],[1,"header"],["routerLink","/kardex/nuevo",1,"btn","btn-sm","btn-primary"],["routerLink","/tipos-movimiento/nuevo",1,"btn","btn-sm","btn-primary"],["class","loading",4,"ngIf"],["class","alert alert-error",4,"ngIf"],["class","table-container",4,"ngIf"],[1,"loading"],[1,"alert","alert-error"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-info",3,"routerLink"],[1,"btn","btn-sm","btn-warning",3,"routerLink"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(e,m){e&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),n(3,"Movimientos Kardex"),t(),i(4,"button",2),n(5," Nuevo Movimiento "),t(),i(6,"h2"),n(7,"Tipos de Movimiento"),t(),i(8,"button",3),n(9," Crear Tipo de Movimiento "),t()(),c(10,w,2,0,"div",4)(11,D,2,1,"div",5)(12,P,22,1,"div",6),t()),e&2&&(o(10),d("ngIf",m.loading),o(),d("ngIf",m.error),o(),d("ngIf",!m.loading&&!m.error))},dependencies:[C,M,k,y,L,I],encapsulation:2})};export{T as KardexListComponent};
