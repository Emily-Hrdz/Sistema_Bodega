import{a as V}from"./chunk-ONQO3NGI.js";import{a as E,b as _,c as v,d as I,e as y,f as N,h as A,i as D,n as R,o as k,p as G}from"./chunk-UKXJF3TO.js";import"./chunk-YCMZOG5D.js";import{b as S,d as x}from"./chunk-ZN2XXCIA.js";import{Fa as g,Ja as u,Jb as b,Lb as F,Ua as s,Va as o,Wa as r,Xa as d,ab as p,bb as C,hb as n,ib as h,jb as f,ua as a,za as m}from"./chunk-CFCTFSSM.js";function T(l,i){if(l&1&&(o(0,"div",14),n(1),r()),l&2){let e=C();a(),h(e.error)}}function j(l,i){l&1&&(o(0,"div",15),n(1," C\xF3digo es requerido "),r())}var M=class l{constructor(i,e,t,c){this.fb=i;this.containerService=e;this.route=t;this.router=c;this.containerForm=this.fb.group({codigo:["",[v.required,v.maxLength(50)]],descripcion:[""],activo:[!0]})}containerForm;isEdit=!1;loading=!1;error=null;ngOnInit(){let i=this.route.snapshot.params.id;i&&(this.isEdit=!0,this.loadContainer(Number(i)))}loadContainer(i){this.loading=!0,this.containerService.getById(i).subscribe({next:e=>{this.containerForm.patchValue(e),this.loading=!1},error:e=>{this.error="Error al cargar container",this.loading=!1,console.error(e)}})}onSubmit(){if(this.containerForm.invalid)return;this.loading=!0;let i=this.containerForm.value;if(this.isEdit){let e=this.route.snapshot.params.id;this.containerService.update(Number(e),i).subscribe({next:()=>{this.router.navigate(["/containers"])},error:t=>{this.error=t.error?.message||"Error al actualizar container",this.loading=!1}})}else this.containerService.create(i).subscribe({next:()=>{this.router.navigate(["/containers"])},error:e=>{this.error=e.error?.message||"Error al crear container",this.loading=!1}})}onCancel(){this.router.navigate(["/containers"])}static \u0275fac=function(e){return new(e||l)(m(k),m(V),m(S),m(x))};static \u0275cmp=g({type:l,selectors:[["app-container-form"]],decls:23,vars:6,consts:[[1,"container"],["class","alert alert-error",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","codigo"],["type","text","id","codigo","formControlName","codigo","maxlength","50",1,"form-control"],["class","error",4,"ngIf"],["for","descripcion"],["id","descripcion","formControlName","descripcion","rows","3",1,"form-control"],[1,"checkbox-label"],["type","checkbox","formControlName","activo"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"alert","alert-error"],[1,"error"]],template:function(e,t){if(e&1&&(o(0,"div",0)(1,"h1"),n(2),r(),u(3,T,2,1,"div",1),o(4,"form",2),p("ngSubmit",function(){return t.onSubmit()}),o(5,"div",3)(6,"label",4),n(7,"C\xF3digo *"),r(),d(8,"input",5),u(9,j,2,0,"div",6),r(),o(10,"div",3)(11,"label",7),n(12,"Descripci\xF3n"),r(),d(13,"textarea",8),r(),o(14,"div",3)(15,"label",9),d(16,"input",10),n(17," Activo "),r()(),o(18,"div",11)(19,"button",12),n(20),r(),o(21,"button",13),p("click",function(){return t.onCancel()}),n(22," Cancelar "),r()()()()),e&2){let c;a(2),f("",t.isEdit?"Editar":"Nuevo"," Container"),a(),s("ngIf",t.error),a(),s("formGroup",t.containerForm),a(5),s("ngIf",((c=t.containerForm.get("codigo"))==null?null:c.invalid)&&((c=t.containerForm.get("codigo"))==null?null:c.touched)),a(10),s("disabled",t.containerForm.invalid||t.loading),a(),f(" ",t.isEdit?"Actualizar":"Crear"," Container ")}},dependencies:[F,b,G,N,_,E,I,y,R,A,D],encapsulation:2})};export{M as ContainerFormComponent};
