import{a as w}from"./chunk-SLEU7N6K.js";import{a as y,b as N,c as g,d as M,e as V,f as k,h as A,i as G,o as R,p as T}from"./chunk-UKXJF3TO.js";import"./chunk-6OBKXAVN.js";import{b as E,d as B}from"./chunk-ZN2XXCIA.js";import{$a as x,Fa as h,Ja as f,Jb as I,Lb as S,Ua as m,Va as a,Wa as r,Xa as u,Y as p,Z as b,ab as v,bb as s,fb as C,hb as l,ib as _,jb as F,ua as d,za as c}from"./chunk-CFCTFSSM.js";function j(n,t){n&1&&(a(0,"div",4),l(1,"Cargando..."),r())}function q(n,t){if(n&1&&(a(0,"div",5),l(1),r()),n&2){let e=s();d(),_(e.error)}}function O(n,t){n&1&&(a(0,"div",17),l(1," El nombre es requerido (m\xE1x. 100 caracteres) "),r())}function L(n,t){if(n&1){let e=x();a(0,"form",6),v("ngSubmit",function(){p(e);let i=s();return b(i.onSubmit())}),a(1,"div",7)(2,"label",8),l(3,"Nombre *"),r(),u(4,"input",9),f(5,O,2,0,"div",10),r(),a(6,"div",7)(7,"label",11),l(8,"Ubicaci\xF3n"),r(),u(9,"input",12),r(),a(10,"div",7)(11,"label"),u(12,"input",13),l(13," Activo "),r()(),a(14,"div",14)(15,"button",15),l(16),r(),a(17,"button",16),v("click",function(){p(e);let i=s();return b(i.onCancel())}),l(18," Cancelar "),r()()()}if(n&2){let e,o,i=s();m("formGroup",i.bodegaForm),d(4),C("is-invalid",((e=i.bodegaForm.get("nombre"))==null?null:e.invalid)&&((e=i.bodegaForm.get("nombre"))==null?null:e.touched)),d(),m("ngIf",((o=i.bodegaForm.get("nombre"))==null?null:o.invalid)&&((o=i.bodegaForm.get("nombre"))==null?null:o.touched)),d(10),m("disabled",i.bodegaForm.invalid||i.loading),d(),F(" ",i.isEditMode?"Actualizar":"Crear"," ")}}var D=class n{constructor(t,e,o,i){this.fb=t;this.bodegaService=e;this.route=o;this.router=i;this.bodegaForm=this.fb.group({nombre:["",[g.required,g.maxLength(100)]],ubicacion:["",g.maxLength(200)],activo:[!0]})}bodegaForm;isEditMode=!1;bodegaId=null;loading=!1;error=null;ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&(this.isEditMode=!0,this.bodegaId=+t,this.loadBodega(this.bodegaId))}loadBodega(t){this.loading=!0,this.bodegaService.getById(t).subscribe({next:e=>{this.bodegaForm.patchValue(e),this.loading=!1},error:e=>{this.error="Error al cargar bodega",this.loading=!1,console.error(e)}})}onSubmit(){if(this.bodegaForm.invalid)return;this.loading=!0;let t=this.bodegaForm.value;(this.isEditMode&&this.bodegaId?this.bodegaService.update(this.bodegaId,t):this.bodegaService.create(t)).subscribe({next:()=>{this.router.navigate(["/bodegas/list"])},error:o=>{this.error="Error al guardar bodega",this.loading=!1,console.error(o)}})}onCancel(){this.router.navigate(["/bodegas/list"])}static \u0275fac=function(e){return new(e||n)(c(R),c(w),c(E),c(B))};static \u0275cmp=h({type:n,selectors:[["app-bodega-form"]],decls:6,vars:4,consts:[[1,"container"],["class","loading",4,"ngIf"],["class","alert alert-error",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"loading"],[1,"alert","alert-error"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","ubicacion"],["type","text","id","ubicacion","formControlName","ubicacion",1,"form-control"],["type","checkbox","formControlName","activo"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"invalid-feedback"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"h1"),l(2),r(),f(3,j,2,0,"div",1)(4,q,2,1,"div",2)(5,L,19,6,"form",3),r()),e&2&&(d(2),_(o.isEditMode?"Editar Bodega":"Nueva Bodega"),d(),m("ngIf",o.loading),d(),m("ngIf",o.error),d(),m("ngIf",!o.loading))},dependencies:[S,I,T,k,N,y,M,V,A,G],encapsulation:2})};export{D as BodegaFormComponent};
