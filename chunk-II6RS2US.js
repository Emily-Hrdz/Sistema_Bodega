import{a as L}from"./chunk-YJAF4Q5N.js";import{a as y,b as I,c as m,d as N,e as T,f as A,h as R,i as k,n as D,o as G,p as V}from"./chunk-UKXJF3TO.js";import"./chunk-6OBKXAVN.js";import{b as x,d as S}from"./chunk-ZN2XXCIA.js";import{Fa as C,Ja as p,Jb as E,Lb as _,Ua as d,Va as r,Wa as t,Xa as s,ab as g,bb as h,hb as o,ib as F,jb as b,ua as a,za as u}from"./chunk-CFCTFSSM.js";function j(l,n){if(l&1&&(r(0,"div",18),o(1),t()),l&2){let i=h();a(),F(i.error)}}function q(l,n){l&1&&(r(0,"div",19),o(1," C\xF3digo es requerido "),t())}function B(l,n){l&1&&(r(0,"div",19),o(1," Nombre es requerido "),t())}function O(l,n){l&1&&(r(0,"div",19),o(1," Email debe ser v\xE1lido "),t())}var M=class l{constructor(n,i,e,c){this.fb=n;this.clienteService=i;this.route=e;this.router=c;this.clienteForm=this.fb.group({codigo:["",[m.required,m.maxLength(50)]],nombre:["",[m.required,m.maxLength(200)]],email:["",[m.email,m.maxLength(100)]],telefono:["",[m.maxLength(20)]],activo:[!0]})}clienteForm;isEdit=!1;loading=!1;error=null;ngOnInit(){let n=this.route.snapshot.params.id;n&&(this.isEdit=!0,this.loadCliente(Number(n)))}loadCliente(n){this.loading=!0,this.clienteService.getById(n).subscribe({next:i=>{this.clienteForm.patchValue(i),this.loading=!1},error:i=>{this.error="Error al cargar cliente",this.loading=!1,console.error(i)}})}onSubmit(){if(this.clienteForm.invalid)return;this.loading=!0;let n=this.clienteForm.value;if(this.isEdit){let i=this.route.snapshot.params.id;this.clienteService.update(Number(i),n).subscribe({next:()=>{this.router.navigate(["/clientes"])},error:e=>{this.error=e.error?.message||"Error al actualizar cliente",this.loading=!1}})}else this.clienteService.create(n).subscribe({next:()=>{this.router.navigate(["/clientes"])},error:i=>{this.error=i.error?.message||"Error al crear cliente",this.loading=!1}})}onCancel(){this.router.navigate(["/clientes"])}static \u0275fac=function(i){return new(i||l)(u(G),u(L),u(x),u(S))};static \u0275cmp=C({type:l,selectors:[["app-cliente-form"]],decls:33,vars:8,consts:[[1,"container"],["class","alert alert-error",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","codigo"],["type","text","id","codigo","formControlName","codigo","maxlength","50",1,"form-control"],["class","error",4,"ngIf"],["for","nombre"],["type","text","id","nombre","formControlName","nombre","maxlength","200",1,"form-control"],["for","email"],["type","email","id","email","formControlName","email","maxlength","100",1,"form-control"],["for","telefono"],["type","tel","id","telefono","formControlName","telefono","maxlength","20",1,"form-control"],[1,"checkbox-label"],["type","checkbox","formControlName","activo"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"alert","alert-error"],[1,"error"]],template:function(i,e){if(i&1&&(r(0,"div",0)(1,"h1"),o(2),t(),p(3,j,2,1,"div",1),r(4,"form",2),g("ngSubmit",function(){return e.onSubmit()}),r(5,"div",3)(6,"label",4),o(7,"C\xF3digo *"),t(),s(8,"input",5),p(9,q,2,0,"div",6),t(),r(10,"div",3)(11,"label",7),o(12,"Nombre *"),t(),s(13,"input",8),p(14,B,2,0,"div",6),t(),r(15,"div",3)(16,"label",9),o(17,"Email"),t(),s(18,"input",10),p(19,O,2,0,"div",6),t(),r(20,"div",3)(21,"label",11),o(22,"Tel\xE9fono"),t(),s(23,"input",12),t(),r(24,"div",3)(25,"label",13),s(26,"input",14),o(27," Activo "),t()(),r(28,"div",15)(29,"button",16),o(30),t(),r(31,"button",17),g("click",function(){return e.onCancel()}),o(32," Cancelar "),t()()()()),i&2){let c,f,v;a(2),b("",e.isEdit?"Editar":"Nuevo"," Cliente"),a(),d("ngIf",e.error),a(),d("formGroup",e.clienteForm),a(5),d("ngIf",((c=e.clienteForm.get("codigo"))==null?null:c.invalid)&&((c=e.clienteForm.get("codigo"))==null?null:c.touched)),a(5),d("ngIf",((f=e.clienteForm.get("nombre"))==null?null:f.invalid)&&((f=e.clienteForm.get("nombre"))==null?null:f.touched)),a(5),d("ngIf",((v=e.clienteForm.get("email"))==null?null:v.invalid)&&((v=e.clienteForm.get("email"))==null?null:v.touched)),a(10),d("disabled",e.clienteForm.invalid||e.loading),a(),b(" ",e.isEdit?"Actualizar":"Crear"," Cliente ")}},dependencies:[_,E,V,A,I,y,N,T,D,R,k],encapsulation:2})};export{M as ClienteFormComponent};
