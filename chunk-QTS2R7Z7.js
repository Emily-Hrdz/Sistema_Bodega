import{a as y}from"./chunk-LFT2GJT2.js";import"./chunk-YCMZOG5D.js";import{e as I}from"./chunk-3IEEZZYB.js";import{$a as x,Fa as b,Hb as h,Ib as E,Ja as g,Kb as S,Ua as m,Va as n,Wa as i,Y as _,Z as f,ab as p,bb as s,gb as L,hb as o,ib as u,jb as C,ua as a,za as v}from"./chunk-BGDAOEK3.js";function w(r,e){if(r&1&&(n(0,"div",7),o(1),i()),r&2){let t=s();a(),u(t.error)}}function V(r,e){r&1&&(n(0,"div",8),o(1,"Cargando..."),i())}function D(r,e){r&1&&(n(0,"div",9),o(1," No hay lotes registrados "),i())}function T(r,e){if(r&1){let t=x();n(0,"tr")(1,"td"),o(2),i(),n(3,"td"),o(4),i(),n(5,"td")(6,"span"),o(7),i()(),n(8,"td",12)(9,"button",13),p("click",function(){let c=_(t).$implicit,d=s(2);return f(d.onView(c.id))}),o(10," Ver "),i(),n(11,"button",14),p("click",function(){let c=_(t).$implicit,d=s(2);return f(d.onEdit(c.id))}),o(12," Editar "),i(),n(13,"button",15),p("click",function(){let c=_(t).$implicit,d=s(2);return f(d.onDelete(c.id))}),o(14," Eliminar "),i()()()}if(r&2){let t=e.$implicit,l=s(2);a(2),u(t.codigo),a(2),u(l.formatDate(t.fechaVencimiento)),a(2),L(t.activo?"badge-success":"badge-danger"),a(),C(" ",t.activo?"Activo":"Inactivo"," ")}}function F(r,e){if(r&1&&(n(0,"table",10)(1,"thead")(2,"tr")(3,"th"),o(4,"C\xF3digo"),i(),n(5,"th"),o(6,"Fecha Vencimiento"),i(),n(7,"th"),o(8,"Estado"),i(),n(9,"th"),o(10,"Acciones"),i()()(),n(11,"tbody"),g(12,T,15,5,"tr",11),i()()),r&2){let t=s();a(12),m("ngForOf",t.lotes)}}var k=class r{constructor(e,t){this.loteService=e;this.router=t}lotes=[];loading=!1;error=null;ngOnInit(){this.loadLotes()}loadLotes(){this.loading=!0,this.loteService.getAll().subscribe({next:e=>{this.lotes=e,this.loading=!1},error:e=>{this.error="Error al cargar lotes",this.loading=!1,console.error(e)}})}onCreate(){this.router.navigate(["/lotes/nuevo"])}onView(e){this.router.navigate(["/lotes",e])}onEdit(e){this.router.navigate(["/lotes",e,"edit"])}onDelete(e){confirm("\xBFEst\xE1 seguro de eliminar este lote?")&&this.loteService.delete(e).subscribe({next:()=>{this.loadLotes()},error:t=>{this.error="Error al eliminar lote",console.error(t)}})}formatDate(e){return e?new Date(e).toLocaleDateString("es-ES"):"-"}static \u0275fac=function(t){return new(t||r)(v(y),v(I))};static \u0275cmp=b({type:r,selectors:[["app-lotes-list"]],decls:10,vars:4,consts:[[1,"container"],[1,"header"],[1,"btn","btn-primary",3,"click"],["class","alert alert-error",4,"ngIf"],["class","loading",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","table",4,"ngIf"],[1,"alert","alert-error"],[1,"loading"],[1,"empty-state"],[1,"table"],[4,"ngFor","ngForOf"],[1,"actions"],[1,"btn","btn-sm","btn-info",3,"click"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(t,l){t&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),o(3,"Lotes"),i(),n(4,"button",2),p("click",function(){return l.onCreate()}),o(5," Nuevo Lote "),i()(),g(6,w,2,1,"div",3)(7,V,2,0,"div",4)(8,D,2,0,"div",5)(9,F,13,1,"table",6),i()),t&2&&(a(6),m("ngIf",l.error),a(),m("ngIf",l.loading),a(),m("ngIf",!l.loading&&l.lotes.length===0),a(),m("ngIf",!l.loading&&l.lotes.length>0))},dependencies:[S,h,E],encapsulation:2})};export{k as LotesListComponent};
