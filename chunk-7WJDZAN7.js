import{a as k}from"./chunk-75MGLJEA.js";import{a as E,b as T,c as b,d as y,e as x,f as N,h as M,i as G,o as D,p as R}from"./chunk-KK4GU3FI.js";import"./chunk-YCMZOG5D.js";import{c as C,e as _}from"./chunk-3IEEZZYB.js";import{Fa as g,Ib as S,Ja as s,Kb as I,Ua as c,Va as n,Wa as r,Xa as u,ab as v,bb as h,fb as P,hb as d,ib as f,jb as F,ua as i,za as m}from"./chunk-BGDAOEK3.js";function V(a,t){if(a&1&&(n(0,"div",15),d(1),r()),a&2){let e=h();i(),f(e.error)}}function j(a,t){a&1&&(n(0,"div",16),d(1," El nombre es requerido (m\xE1x. 100 caracteres) "),r())}var A=class a{constructor(t,e,o,l){this.fb=t;this.tipoProductoService=e;this.router=o;this.route=l;this.tipoProductoForm=this.fb.group({nombre:["",[b.required,b.maxLength(100)]],descripcion:[""],activo:[!0]})}tipoProductoForm;isEditMode=!1;tipoProductoId=null;loading=!1;error=null;ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&(this.isEditMode=!0,this.tipoProductoId=+t,this.loadTipoProducto(this.tipoProductoId))}loadTipoProducto(t){this.loading=!0,this.tipoProductoService.getById(t).subscribe({next:e=>{this.tipoProductoForm.patchValue({nombre:e.nombre,descripcion:e.descripcion,activo:!0}),this.loading=!1},error:e=>{this.error="Error al cargar el tipo de producto",this.loading=!1,console.error(e)}})}onSubmit(){if(this.tipoProductoForm.valid){this.loading=!0;let t=this.tipoProductoForm.value;(this.isEditMode&&this.tipoProductoId?this.tipoProductoService.update(this.tipoProductoId,t):this.tipoProductoService.create(t)).subscribe({next:()=>{this.router.navigate(["/productos/list"])},error:o=>{this.error=o.error?.message||"Error al guardar el tipo de producto",this.loading=!1,console.error(o)}})}}cancel(){this.router.navigate(["/productos/list"])}static \u0275fac=function(e){return new(e||a)(m(D),m(k),m(_),m(C))};static \u0275cmp=g({type:a,selectors:[["app-tipo-producto-form"]],decls:24,vars:9,consts:[[1,"container"],[1,"header"],["class","alert alert-error",4,"ngIf"],[1,"form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],["class","error-message",4,"ngIf"],["for","descripcion"],["id","descripcion","formControlName","descripcion","rows","3",1,"form-control"],[1,"form-group","checkbox-group"],["type","checkbox","formControlName","activo"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"alert","alert-error"],[1,"error-message"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),d(3),r()(),s(4,V,2,1,"div",2),n(5,"form",3),v("ngSubmit",function(){return o.onSubmit()}),n(6,"div",4)(7,"label",5),d(8,"Nombre *"),r(),u(9,"input",6),s(10,j,2,0,"div",7),r(),n(11,"div",4)(12,"label",8),d(13,"Descripci\xF3n"),r(),u(14,"textarea",9),r(),n(15,"div",10)(16,"label"),u(17,"input",11),d(18," Activo "),r()(),n(19,"div",12)(20,"button",13),v("click",function(){return o.cancel()}),d(21," Cancelar "),r(),n(22,"button",14),d(23),r()()()()),e&2){let l,p;i(3),f(o.isEditMode?"Editar Tipo de Producto":"Nuevo Tipo de Producto"),i(),c("ngIf",o.error),i(),c("formGroup",o.tipoProductoForm),i(4),P("invalid",((l=o.tipoProductoForm.get("nombre"))==null?null:l.invalid)&&((l=o.tipoProductoForm.get("nombre"))==null?null:l.touched)),i(),c("ngIf",((p=o.tipoProductoForm.get("nombre"))==null?null:p.invalid)&&((p=o.tipoProductoForm.get("nombre"))==null?null:p.touched)),i(10),c("disabled",o.loading),i(2),c("disabled",o.tipoProductoForm.invalid||o.loading),i(),F(" ",o.loading?"Guardando...":"Guardar"," ")}},dependencies:[I,S,R,N,T,E,y,x,M,G],encapsulation:2})};export{A as TipoProductoFormComponent};
